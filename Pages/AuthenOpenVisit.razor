@page "/authen"
@* @page "/authen/{Clinic}" *@
@using HosxpUi.Models
@using HosxpUi.Shared
@using Microsoft.AspNetCore.Authorization
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NavigationManager _navigationManager;
@inject HttpClient _http 
@inject HttpClient http 
@attribute [Authorize]

<button @onclick="SendPostRequest">Send</button>



@code {
    protected async Task SendPostRequest()
    {
        var requestData = new Ovst
        {
            Hn = "0020000"
        };

        try
        {
            // Send POST request
            var response = await http.PostAsJsonAsync("http://localhost:5094/api/Hos/OpenVisitWithKey", requestData);

            if (response.IsSuccessStatusCode)
            {
                // Parse response
                var responseData = await response.Content.ReadFromJsonAsync<ResponseModel>();
                Console.WriteLine($"Success: {responseData.Status}, Message: {responseData.Message}");
            }
            else
            {
                Console.WriteLine($"Error: {response.StatusCode}");
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Exception occurred: {ex.Message}");
        }
        }

}
